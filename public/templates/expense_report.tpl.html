
<div ng-init="setExpenseReport()">
    <div class="form-group">
        <label for="inputExpenseReportName">Name</label>
        <input type="text" class="form-control" ng-model="expenseReport.name" ng-disabled="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied')" id="inputExpenseReportName" placeholder="Name">
    </div>

    <div ng-hide="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied')" class="form-group" >
        <label for="drpdwnvalue">Add Line Item</label>
        <select class="form-control" id="drpdwnvalue" ng-change="addItem()" ng-model="dropdownvalue" ng-options="type.name for type in LineItemTypes" ng-disabled="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied')">
            <option></option>
        </select>
    </div>

    <div class="form-group" ng-repeat="line in expenseReport.items">
        <label id={{line.type}}Label>{{line.type}}</label>
        <div data-ng-class="{'input-group': (expenseReport.status === 'saved') || (expenseReport.status === undefined)}">
            <input type="text" data-ng-class="{'line-item': (expenseReport.status === 'saved') || (expenseReport.status === undefined)}" class="form-control" ng-model="line.value" ng-disabled="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied')" ui-money-mask placeholder="Value Amount Here" id={{line.type}}InputID>
            <span class="input-group-addon red-x" ng-hide="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied')" ng-click="delete($index)"id={{line.type}}Delete>&times;</span>
        </div>
    </div>

    <div ui-view="projectSelect"></div>

    <!--  Receipts  starts  -->

    <form name="myForm">
        <label ng-hide="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied') || !showButton">Receipts</label>
        <div name="uploadForm" ng-hide="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied') || !showButton" class="btn btn-default fileinput-button form-control">
            <span>Attach Receipt</span>
            <input type="file" ngf-select ng-model="picFile" onchange="angular.element(this).scope().onFileSelect(this)" accept=".jpg, .jpeg, .gif, .png, .pdf">
        </div>
        <div class="receiptView">
            <div>
                <span class="" ng-show="picFile">{{fileNamePreview}}</span>
            </div>
            <div>
                <img ng-show="myForm.file.$valid" ngf-thumbnail="fileThumb" class="thumb">
                <span class="err" ng-show="invalidFile">{{fileError}}</span>
            </div>
            <br>
            <div>
                <button class="btn btn-default" ng-click="removeUploadPreview()" ng-show="picFile">Remove</button>
                <button class="btn btn-default" ng-disabled="invalidUploadFile" ng-show="picFile" ng-click="uploadReceipt(picFile)">Upload</button>
            </div>
            <div>
                <span class="progress" ng-show="picFile.progress >= 0">
                      <div style="width:{{picFile.progress}}%" ng-bind="picFile.progress + '%'"></div>
                </span>
            </div>
            <div>
                <span ng-show="picFile.result">Upload Successful</span>
            </div>
        </div>
        <br>
    </form>

    <div class="col-md-2 col-sm-3 col-xs-6" ng-repeat="receipt in receipts">
        <div class="receiptView">
            <div ng-click="viewReceiptFile(this)">
                <div>
                    <label>{{receipt.name}}</label>
                </div>
                <div>
                    <img ng-src="{{receipt.imgThumb}}" class="thumb">
                </div>
            </div>
            <button class="btn btn-default receiptButton" ng-click="removeFileFromScopeAndReport($index)">Remove</button>
        </div>
    </div>
    <br>
    <legend ng-hide="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied') || !showButton"></legend>

    <!--  Receipts  ends  -->

    <div class="form-group">
        <label>Notes:</label>
        <textarea ng-disabled="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied')" class="form-control" data-ng-model="expenseReport.notes" id="notesInput"></textarea>
    </div>
    <div>
        <button ng-hide="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied') || !showButton" type="submit" ng-click="save()" class="btn btn-default" id="save">Save</button>
        <button ng-hide="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied') || !showButton" type="submit" ng-click="submit()" class="btn btn-default" id="submit">Submit</button>
        <button ng-hide="expenseReport.hasOwnProperty('status') && (expenseReport.status === 'submitted' || expenseReport.status === 'approved' || expenseReport.status === 'denied')" type="submit" ng-click="cancel()" class="btn pull-right btn-default" id="cancel">Cancel</button>
    </div>
	<div ng-show="expenseReport.hasOwnProperty('status') && expenseReport.status === 'submitted'">
		<button type="submit" ng-click="unsubmit()" class="btn btn-default">Unsubmit</button>
	</div>
</div>
